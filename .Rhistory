# p <- p + coord_cartesian(ylim = c(0, 3000000))
p <- p + scale_x_date(labels = date_format("%Y-%m"))
p <- p + scale_y_continuous(labels = dollar)
p <- p + scale_color_brewer(palette = "Set1")
p <- p + xlab("Last Sale Date") + ylab("Last Sale Price")
p
runApp()
runApp()
?scale_dollar
?scale_dollar
runApp()
runApp()
table(data2012$home.type)
table(data2012$home.type)
runApp()
runApp()
runApp()
runApp()
?par
runApp()
par(mfrow=c(1,2),oma=c(0,0,0,0),mar=c(4,1,3,0))
hist(data2012$last.sale.price)
hist(data2012$price.sqft)
runApp()
runApp()
runApp()
runApp()
runApp()
library(ggplot2)
library(RColorBrewer)
# library(reshape2)
library(stringr)
library(plyr)
library(googleVis)
library(ggmap)
library(shiny)
library(rCharts)
FName <- list.files(path = "./raw", pattern = '.*\\.csv', full.names = TRUE, recursive = TRUE)
ldf <- lapply(FName, function(x) read.csv(x))
data <- rbind.fill(ldf)
head(as.character(data2$ADDRESS))
head(as.character(data$ADDRESS))
rm(FName, ldf)
str(data)
names(data) <- tolower(names(data))
data$last.sale.date <- as.Date(data$last.sale.date)
table(data$location)
names(data)[25] <- "url"
names(data)
length(unique(data$url))
length(unique(data$address))
data <- subset(data, !duplicated(data$url))
table(data$home.type, useNA = 'ifany')
data <- subset(data, !home.type %in% c("", "Unknown", "Vacant Land"))
data[data$home.type %in% c("Multi-Family (5+ Unit)", "Multi-Family (2-4 Unit)"),]$home.type <- "Multi-Family"
str(data)
FName <- list.files(path = "./raw", pattern = '.*\\.csv', full.names = TRUE, recursive = TRUE)
ldf <- lapply(FName, function(x) read.csv(x, stringsAsFactors = F))
data <- rbind.fill(ldf)
head(as.character(data$ADDRESS))
rm(FName, ldf)
str(data)
names(data) <- tolower(names(data))
data$last.sale.date <- as.Date(data$last.sale.date)
table(data$location)
names(data)[25] <- "url"
length(unique(data$url))
length(unique(data$address))
length(unique(data$address))
table(!duplicated(data$url))
table(!is.na(data$url))
data$url[1:100]
nchar(data$url[1:100])
summary(nchar(data$url))
hist(nchar(data$url))
data <- subset(data, !duplicated(data$url))
table(data$home.type, useNA = 'ifany')
data <- subset(data, !home.type %in% c("", "Unknown", "Vacant Land"))
data[data$home.type %in% c("Multi-Family (5+ Unit)", "Multi-Family (2-4 Unit)"),]$home.type <- "Multi-Family"
str(data)
data <- subset(data, !duplicated(data$url))
data[nchar(data$url) <= 10,]$url
data[nchar(data$url) <= 10,]
summary(nchar(data$url))
hist(nchar(data$url))
table(data$home.type, useNA = 'ifany')
data$home.type <- factor(data$home.type, levels = c("Condo/Coop", "Townhouse", "Single Family Residential", "Mobile/Manufactured Home", "Multi-Family"))
table(data$city, useNA = 'ifany')
data$city <- gsub("CUPERTINO", "Cupertino", data$city)
data$city <- gsub("LOS ALTOS", "Los Altos", data$city)
data$city <- gsub("MOUNTAIN VIEW", "Mountain View", data$city)
data$city <- gsub("PALO ALTO", "Palo Alto", data$city)
data$city <- gsub("SUNNYVALE", "Sunnyvale", data$city)
table(data$city, useNA = 'ifany')
library(HMisc)
library(Hmisc)
?capitalize
capitalize(c("Hello", "bob", "daN"))
capitalize(c("Hello", "bob", "daN"))
capitalize("LOS ALTOS")
capitalize("los altos")
.simpleCap("the quick red fox jumps over the lazy brown dog")
.simpleCap("los altos")
data$city <- tolower(data$city)
data$city <- .simpleCap(data$city)
table(data$city, useNA = 'ifany')
table(data$city)
FName <- list.files(path = "./raw", pattern = '.*\\.csv', full.names = TRUE, recursive = TRUE)
ldf <- lapply(FName, function(x) read.csv(x, stringsAsFactors = F))
data <- rbind.fill(ldf)
data2 <- rbind.fill(ldf)
head(as.character(data$ADDRESS))
rm(FName, ldf)
str(data)
names(data) <- tolower(names(data))
data$last.sale.date <- as.Date(data$last.sale.date)
table(data$location)
names(data)[25] <- "url"
names(data)
length(unique(data$url))
length(unique(data$address))
table(!duplicated(data$url))
table(!is.na(data$url))
summary(nchar(data$url))
hist(nchar(data$url))
data <- subset(data, !duplicated(data$url))
table(data$home.type, useNA = 'ifany')
data <- subset(data, !home.type %in% c("", "Unknown", "Vacant Land"))
data[data$home.type %in% c("Multi-Family (5+ Unit)", "Multi-Family (2-4 Unit)"),]$home.type <- "Multi-Family"
str(data)
data$home.type <- factor(data$home.type, levels = c("Condo/Coop", "Townhouse", "Single Family Residential", "Mobile/Manufactured Home", "Multi-Family"))
table(data$city, useNA = 'ifany')
data$city <- tolower(data$city)
table(data$city, useNA = 'ifany')
data$city <- .simpleCap(data$city)
table(data$city, useNA = 'ifany')
data <- data2
table(data$city, useNA = 'ifany')
head(as.character(data$ADDRESS))
rm(FName, ldf)
str(data)
names(data) <- tolower(names(data))
data$last.sale.date <- as.Date(data$last.sale.date)
table(data$location)
names(data)[25] <- "url"
names(data)
length(unique(data$url))
length(unique(data$address))
table(!duplicated(data$url))
table(!is.na(data$url))
summary(nchar(data$url))
hist(nchar(data$url))
data <- subset(data, !duplicated(data$url))
table(data$home.type, useNA = 'ifany')
data <- subset(data, !home.type %in% c("", "Unknown", "Vacant Land"))
data[data$home.type %in% c("Multi-Family (5+ Unit)", "Multi-Family (2-4 Unit)"),]$home.type <- "Multi-Family"
str(data)
data$home.type <- factor(data$home.type, levels = c("Condo/Coop", "Townhouse", "Single Family Residential", "Mobile/Manufactured Home", "Multi-Family"))
table(data$city, useNA = 'ifany')
data <- subset(data, last.sale.date >= as.Date("2012-07-01"))
names(data)[25] <- "url"
names(data)
length(unique(data$url))
length(unique(data$address))
table(!duplicated(data$url))
table(!is.na(data$url))
summary(nchar(data$url))
hist(nchar(data$url))
data <- subset(data, !duplicated(data$url))
table(data$home.type, useNA = 'ifany')
data <- subset(data, !home.type %in% c("", "Unknown", "Vacant Land"))
data[data$home.type %in% c("Multi-Family (5+ Unit)", "Multi-Family (2-4 Unit)"),]$home.type <- "Multi-Family"
str(data)
data$home.type <- factor(data$home.type, levels = c("Condo/Coop", "Townhouse", "Single Family Residential", "Mobile/Manufactured Home", "Multi-Family"))
table(data$city, useNA = 'ifany')
data$city <- tolower(data$city)
table(.simpleCap(data$city))
table(data$city, useNA = 'ifany')
data$city <- tolower(data$city)
table(data$city, useNA = 'ifany')
summary(data$sqft)
summary(data)
names(data)
aryVarName <- c(6, 8, 9, 11, 13, 24, 31, 32)
names(data)[aryVarName]
summary(data[,aryVarName])
data <- data[complete.cases(data[,aryVarName]),]
table(data$state)
table(data$zip)
data <- subset(data, zip != 0)
table(data$beds)
data <- subset(data, beds != 0)
data[which.max(data$beds),]
table(data$beds)
data <- subset(data, beds != 0)
data[which.max(data$beds),]
table(data$baths)
qplot(data = data, x = beds, y = baths, color = home.type, geom = 'point')
data <- subset(data, baths <= 15)
summary(data$sqft)
summary(data$lot.size)
data[which.max(data$lot.size),]
summary(data$lot.size)
data[which.max(data$lot.size),]$lot.size[1:10]
data[with(data, order(-lot.size)),][c(1:10),]$lot.size
data[with(data, order(-lot.size)),][c(1:20),]$lot.size
data[with(data, order(-lot.size)),][c(1:50),]$lot.size
data[with(data, order(-lot.size)),][c(1:5),]
qplot(data = subset(data, home.type != "Single Family Residential"), x = last.sale.price, y = lot.size, color = home.type, geom = 'point')
names(data)
summary(data$last.sale.date)
head(data[with(data, order(year.built)),])
data[which.min(data$year.built),]$year.built
data[grep("PARK VILLA Cir", data$address),]$year.built
data[which.min(data$year.built),]$year.built
head(data[with(data, order(year.built)),])
data[which.min(data$year.built),]$year.built
data[grep("PARK VILLA Cir", data$address),]$year.built
head(data[with(data, order(year.built)),])
data[which.min(data$year.built),]$year.built
summary(data$last.sale.price)
head(data[with(data, order(last.sale.price)),])
head(data[with(data, -order(last.sale.price)),])
head(data[with(data, order(-last.sale.price)),])
qplot(data = data, x = last.sale.price, geom = 'histogram', xlim = c(0, 3000000), binwidth = 10000)
data[which.max(data$last.sale.price)]
data[which.max(data$last.sale.price),]
data[which.max(data$last.sale.price),] <- 1400000
head(data[with(data, order(-last.sale.price)),])
data[which.max(data$last.sale.price),]$last.sale.price <- 1400000
head(data[with(data, order(-last.sale.price)),])
qplot(data = data, x = last.sale.price, geom = 'histogram', xlim = c(0, 3000000), binwidth = 10000)
data$price.sqft <- data$last.sale.price / data$sqft
summary(data$price.sqft)
head(data[with(data, order(-price.sqft)),])
table(data$city)
saveRDS(data, "housingData.RDS")
?load.rds
?load.RDS
read.RDS
readRDS
?readRDS
housingData <- readRDS("housingData.RDS")
runApp()
summary(housingData$lat)
summary(housingData$long)
runApp()
runApp()
runApp()
runApp()
names(data)[25] <- "redfinUrl"
saveRDS(data, "housingData.RDS")
housingData <- readRDS("housingData.RDS")
names(housingData)
runApp()
runApp()
data$city <- tolower(data$city)
table(data$city, useNA = 'ifany')
data$city <- capitalize(data$city)
table(data$city, useNA = 'ifany')
data <- subset(data, ! city %in% c("", "Alviso", "Avila Beach", "La Honda", "Out of Area", "Stanford", "Unknown", "Woodside"))
saveRDS(data, "housingData.RDS")
housingData <- readRDS("housingData.RDS")
runApp()
474500/329
summary(data$price.sqft)
head(data[with(data, order(-price.sqft)),])
head(data[with(data, order(-lot.size)),])
head(data[with(data, order(-sqft)),])
data[data$redfinUrl == "http://www.redfin.com/CA/San-Jose/38-N-Almaden-Blvd-95110/unit-1606/home/17289034",]
data[data$redfinUrl == "http://www.redfin.com/CA/San-Jose/38-N-Almaden-Blvd-95110/unit-1606/home/17289034",]$sqft <- 1400
data$price.sqft <- data$last.sale.price / data$sqft
data[data$redfinUrl == "http://www.redfin.com/CA/San-Jose/38-N-Almaden-Blvd-95110/unit-1606/home/17289034",]$sqft <- 1400
data[data$redfinUrl == "http://www.redfin.com/CA/San-Jose/38-N-Almaden-Blvd-95110/unit-1606/home/17289034",]
saveRDS(data, "housingData.RDS")
housingData <- readRDS("housingData.RDS")
runApp()
cut_number(data$last.sale.price, 7)
factor(cut_number(data$last.sale.price, 7))
levels(cut_number(data$last.sale.price, 7))
brewer.pal(7, "Spectral")
levels(cut_number(data$last.sale.price, 5))
runApp()
table(data$city, useNA = 'ifany')
data <- subset(data, ! city %in% c("", "Alviso", "Avila Beach", "La Honda", "Menlo park", "Monte sereno", "Morgan hill", "Out of area", "Stanford", "Unknown", "Woodside"))
table(data$city, useNA = 'ifany')
data$city <- gsub("East palo alto", "East Palo Alto", data$city)
data$city <- gsub("Los altos", "Los Altos", data$city)
data$city <- gsub("Los altos hills", "Los Altos Hills", data$city)
data$city <- gsub("Los gatos", "Los Gatos", data$city)
data$city <- gsub("Mountain view", "Mountain View", data$city)
data$city <- gsub("Palo alto", "Palo Alto", data$city)
data$city <- gsub("San jose", "San Jose", data$city)
data$city <- gsub("Santa clara", "Santa Clara", data$city)
table(data$city, useNA = 'ifany')
saveRDS(data, "housingData.RDS")
housingData <- readRDS("housingData.RDS")
rm(data2)
rm(data2012)
rm(p)
rm(aryVarName)
library(shinyapps)
deployApp()
?deployApp
deployApp()
deployApp()
deployApp()
shinyapps::setAccountInfo(
name="ikding",
token="3AEDCFEEE0C2281CAD0AE67BBECEF3F7",
secret="rlayRyeHbvHPPgrG2VT18Z5xKT0GaQaeNw8vdgUc")
deployApp()
library(shiny)
library(leaflet)
library(RColorBrewer)
library(scales)
library(lattice)
library(ggplot2)
library(plyr)
library(maps)
library(zoo)
deployApp()
deployApp("bayAreaHousing")
devtools::install_github('rstudio/shinyapps')
library(shinyapps)
deployApp("bayAreaHousing")
deployApp()
runApp()
library(shiny)
runApp()
runApp()
library(shinyapps)
deployApp()
nrow(subset(data, last.sale.date >= as.Date("2013-07-01")))
nrow(subset(data, last.sale.date >= as.Date("2014-07-01")))
library(shiny)
library(shinyapps)
runApp()
nrow(subset(data, last.sale.date >= as.Date("2014-01-01")))
runApp()
runApp()
runApp()
FName <- list.files(path = "../Redfin-unused files/raw", pattern = '.*\\.csv', full.names = TRUE, recursive = TRUE)
FName <- list.files(path = "../Redfin-unused files/raw", pattern = '.*\\.csv', full.names = TRUE, recursive = TRUE)
FName <- list.files(path = "../Redfin-unused files/raw/Los Gatos", pattern = '.*\\.csv', full.names = TRUE, recursive = TRUE)
ldf <- lapply(FName, function(x) read.csv(x, stringsAsFactors = F))
los.gatos <- rbind.fill(ldf)
data <- rbind.fill(data, los.gatos)
data <- rbind.fill(data, los.gatos)
data <- rbind.fill(data, los.gatos)
rm(FName, ldf)
data$last.sale.date <- as.Date(data$last.sale.date)
table(data$location)
FName <- list.files(path = "../Redfin-unused files/raw", pattern = '.*\\.csv', full.names = TRUE, recursive = TRUE)
ldf <- lapply(FName, function(x) read.csv(x, stringsAsFactors = F))
data <- rbind.fill(ldf)
data2 <- rbind.fill(ldf)
head(as.character(data$ADDRESS))
rm(FName, ldf)
str(data)
names(data) <- tolower(names(data))
data$last.sale.date <- as.Date(data$last.sale.date)
table(data$location)
data <- subset(data, last.sale.date >= as.Date("2012-07-01"))
names(data)[25] <- "redfinUrl"
names(data)
length(unique(data$url))
length(unique(data$address))
table(!duplicated(data$url))
table(!duplicated(data$redfinUrl))
hist(nchar(data$redfinUrl))
data <- subset(data, !duplicated(data$url))
data <- data2
data <- subset(data, !duplicated(data$url))
data <- data2
data <- subset(data, !duplicated(data$redfinUrl))
data <- data2
table(!duplicated(data$redfinUrl))
names(data)[25] <- "redfinUrl"
table(!duplicated(data$redfinUrl))
table(!is.na(data$redfinUrl))
summary(nchar(data$redfinUrl))
hist(nchar(data$redfinUrl))
data <- subset(data, !duplicated(data$redfinUrl))
table(data$home.type, useNA = 'ifany')
names(data)
names(data) <- tolower(names(data))
names(data)[25] <- "redfinUrl"
data <- subset(data, !duplicated(data$redfinUrl))
table(data$home.type, useNA = 'ifany')
data <- subset(data, !home.type %in% c("", "Unknown", "Vacant Land"))
data[data$home.type %in% c("Multi-Family (5+ Unit)", "Multi-Family (2-4 Unit)"),]$home.type <- "Multi-Family"
str(data)
data$home.type <- factor(data$home.type, levels = c("Condo/Coop", "Townhouse", "Single Family Residential", "Mobile/Manufactured Home", "Multi-Family"))
data <- subset(data, last.sale.date >= as.Date("2012-07-01"))
data$home.type <- factor(data$home.type, levels = c("Condo/Coop", "Townhouse", "Single Family Residential", "Mobile/Manufactured Home", "Multi-Family"))
table(data$city, useNA = 'ifany')
data$city <- tolower(data$city)
data$city <- capitalize(data$city)
library(ggplot2)
library(RColorBrewer)
# library(reshape2)
library(stringr)
library(plyr)
library(googleVis)
library(ggmap)
library(Hmisc)
library(shiny)
library(shinyapps)
library(rCharts)
table(data$city, useNA = 'ifany')
data$city <- tolower(data$city)
data$city <- capitalize(data$city)
table(data$city, useNA = 'ifany')
data$city <- gsub("East palo alto", "East Palo Alto", data$city)
data$city <- gsub("Los altos", "Los Altos", data$city)
data$city <- gsub("Los altos hills", "Los Altos Hills", data$city)
data$city <- gsub("Los gatos", "Los Gatos", data$city)
data$city <- gsub("Mountain view", "Mountain View", data$city)
data$city <- gsub("Palo alto", "Palo Alto", data$city)
data$city <- gsub("San jose", "San Jose", data$city)
data$city <- gsub("Santa clara", "Santa Clara", data$city)
data <- subset(data, ! city %in% c("", "Alviso", "Avila Beach", "La Honda", "Menlo park", "Monte sereno", "Morgan hill", "Out of area", "Stanford", "Unknown", "Woodside"))
table(data$city, useNA = 'ifany')
data$city <- gsub("Los Gatos mtns", "Los Gatos", data$city)
data$city <- gsub("Los Gatos mtns scz", "Los Gatos", data$city)
data$city <- gsub("Los Gatos mtns", "Los Gatos", data$city)
table(data$city, useNA = 'ifany')
data$city <- gsub("Los Gatos scz", "Los Gatos", data$city)
table(data$city, useNA = 'ifany')
data <- subset(data, ! city %in% c("", "Alviso", "Avila Beach", "Carmel", "La Honda", "Menlo park", "Monte sereno", "Morgan hill", "Out of area", "Stanford", "Unknown", "Woodside"))
data$city <- gsub("Los Altos hills", "Los Altos Hills", data$city)
table(data$city, useNA = 'ifany')
summary(data$sqft)
summary(data)
names(data)
aryVarName <- c(6, 8, 9, 11, 13, 24, 31, 32)
names(data)[aryVarName]
summary(data[,aryVarName])
data <- data[complete.cases(data[,aryVarName]),]
table(data$state)
table(data$zip)
data <- subset(data, zip != 0)
table(data$beds)
data <- subset(data, beds != 0)
data[which.max(data$beds),]
table(data$baths)
qplot(data = data, x = beds, y = baths, color = home.type, geom = 'point')
data <- subset(data, baths <= 15)
summary(data$sqft)
summary(data$lot.size)
qplot(data = data, x = beds, y = baths, color = home.type, geom = 'point')
summary(data$sqft)
summary(data$lot.size)
data[which.max(data$lot.size),]$lot.size
data[with(data, order(-lot.size)),][c(1:5),]
# data[which.max(data$lot.size),]$lot.size <- 6651
data[which.max(data$lot.size),]
data[which.max(data$lot.size),]
data[with(data, order(-lot.size)),][c(1:50),]$lot.size <- as.numeric("")
qplot(data = subset(data, home.type != "Single Family Residential"), x = last.sale.price, y = lot.size, color = home.type, geom = 'point')
names(data)
summary(data$last.sale.date)
head(data[with(data, order(year.built)),])
data[which.min(data$year.built),]$year.built
# data[grep("PARK VILLA Cir", data$address),]$year.built
# data[which.min(data$year.built),]$year.built <- 1972
summary(data$last.sale.price)
head(data[with(data, order(-last.sale.price)),])
data[which.max(data$last.sale.price),]$last.sale.price <- 1400000
qplot(data = data, x = last.sale.price, geom = 'histogram', xlim = c(0, 3000000), binwidth = 10000)
# Adding some new metrics
data$price.sqft <- data$last.sale.price / data$sqft
summary(data$price.sqft)
head(data[with(data, order(-price.sqft)),])
head(data[with(data, order(-sqft)),])
data[data$redfinUrl == "http://www.redfin.com/CA/San-Jose/38-N-Almaden-Blvd-95110/unit-1606/home/17289034",]$sqft <- 1400
data$price.sqft <- data$last.sale.price / data$sqft
summary(data$price.sqft)
saveRDS(data, "housingData.RDS")
housingData <- readRDS("housingData.RDS")
rm(los.gatos)
rm(data2)
runApp()
runApp()
deployApp()
deployApp()
deployApp()
runApp()
library(shiny)
runApp()
10000/34927
table(data$home.type)
runApp()
runApp()
runApp()
runApp()
runApp()
names(data)[25] <- "url"
housingData <- readRDS("housingData.RDS")
runApp()
l
names(data)[25] <- "redfinUrl"
housingData <- readRDS("housingData.RDS")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
